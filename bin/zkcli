#!/usr/bin/env perl
use strict; use warnings;
use ZooKeeper::CLI;
use Term::ReadLine;
use Try::Tiny;

my $hosts = shift || 'localhost:2181';
my $cli   = ZooKeeper::CLI->new(hosts => $hosts);

my $read = -t STDIN ? sub { $cli->readline } : sub { <STDIN> };
while (defined (my $line = $read->())) {
    $cli->execute($line);
}

